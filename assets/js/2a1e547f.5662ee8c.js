"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7850],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),u=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||i;return n?o.createElement(h,r(r({ref:t},c),{},{components:n})):o.createElement(h,r({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var u=2;u<i;u++)r[u]=n[u];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},546:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return p}});var o=n(7462),a=n(3366),i=(n(7294),n(3905)),r=["components"],l={id:"access-backup",title:"How to access the backup drives on any PC?",sidebar_label:"Backup drives - PC access"},s=void 0,u={unversionedId:"access-backup",id:"access-backup",title:"How to access the backup drives on any PC?",description:"In this article is described how you are able to access the data that is stored on the backup drives on any PC. This should be the last possibility if, for some reason, the whole server and the external data SSD/HDD are no longer working/accessible and you need to access your files from the backup as soon as possible without the ability to set the server up again, which is described here: click here",source:"@site/docs/access-backup.md",sourceDirName:".",slug:"/access-backup",permalink:"/Nextcloud-NAS-Guide/docs/access-backup",draft:!1,editUrl:"https://github.com/szaimen/Nextcloud-NAS-Guide/edit/main/docs/access-backup.md",tags:[],version:"current",frontMatter:{id:"access-backup",title:"How to access the backup drives on any PC?",sidebar_label:"Backup drives - PC access"},sidebar:"docs",previous:{title:"Restore Backup/Upgrade Ubuntu",permalink:"/Nextcloud-NAS-Guide/docs/restore-backup"},next:{title:"Improve Nextcloud Performance",permalink:"/Nextcloud-NAS-Guide/docs/improve-performance"}},c={},p=[{value:"Requirements",id:"requirements",level:2},{value:"Optional requirement",id:"optional-requirement",level:2},{value:"Preparation",id:"preparation",level:2},{value:"Execution",id:"execution",level:2}],d={toc:p};function m(e){var t=e.components,n=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"In this article is described how you are able to access the data that is stored on the backup drives on any PC. This should be the last possibility if, for some reason, the whole server and the external data SSD/HDD are no longer working/accessible and you need to access your files from the backup as soon as possible without the ability to set the server up again, which is described here: ",(0,i.kt)("a",{parentName:"p",href:"./restore-backup"},"click here")),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"One of the external backup HDDs that hold your backup files"),(0,i.kt)("li",{parentName:"ul"},"The passphrase that was initially used to encrypt the backup on the server"),(0,i.kt)("li",{parentName:"ul"},"A x86 Laptop (or PC with Monitor, Mouse and keyboard) for which you can choose the booting order (should usually be the case if it is your own private device)"),(0,i.kt)("li",{parentName:"ul"},"If the Laptop/PC runs Windows or macOS, you will need also an USB-stick with at least 8 GB, as you will boot Linux from the USB-stick to be able to access the Backup")),(0,i.kt)("h2",{id:"optional-requirement"},"Optional requirement"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If you like to restore some files or all files from the backup you will need additionally an external HDD/SSD that is already formatted in your prefered filesystem (e.g. like BTRFS or NTFS or other - please use tools from your OS to do so.)",(0,i.kt)("admonition",{parentName:"li",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"The Apple filesystem (APFS) and ZFS are not covered by this guide.")))),(0,i.kt)("h2",{id:"preparation"},"Preparation"),(0,i.kt)("p",null,"If the Laptop/PC runs Linux, you can stip this section. On Windows an macOS you need to create an USB-stick with Linux and boot from it first:"),(0,i.kt)("admonition",{title:"Bitlocker",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"If Bitlocker is enabled on your Windows Laptop/PC, you should disable Bitlocker temporarily as otherwise you could get asked for a recovery key for this drive after the booting for the Linux USB-stick")),(0,i.kt)("admonition",{title:"Microsoft Surface Pro",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"If you want to use a Microsoft Surface Pro as Laptop/PC here and only have a wireless keyboard and mouse, you need to connect an USB-hub with at least 5 Ports (for Mouse, Keyboard, backup drive, USB-drive, additional drive, etc.) as the touchscreen and wireless acessory will not work out of the box on Ubuntu")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Download")," the latest Ubuntu Desktop 22.04 LTS image by clicking ",(0,i.kt)("a",{parentName:"li",href:"https://releases.ubuntu.com/jammy/ubuntu-22.04.3-desktop-amd64.iso"},"here")," (this might take 30min because of slow download servers)"),(0,i.kt)("li",{parentName:"ol"},"Use the already downloaded image to create a bootable USB-stick by following ",(0,i.kt)("a",{parentName:"li",href:"https://ubuntu.com/tutorials/create-a-usb-stick-on-windows"},"this guide")," (the guide is for Windows, but the guide for macOS is referenced there)"),(0,i.kt)("li",{parentName:"ol"},"Connect the ",(0,i.kt)("strong",{parentName:"li"},"USB-stick")," to your Laptop/PC and select to boot from it",(0,i.kt)("admonition",{parentName:"li",title:"On Windows",type:"tip"},(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},"In Windows, simply click on the virtual restart button while holding the ",(0,i.kt)("inlineCode",{parentName:"li"},"[SHIFT]")," key which will bring you into the troubleshooting menu"),(0,i.kt)("li",{parentName:"ol"},"Click on ",(0,i.kt)("strong",{parentName:"li"},"Use a device")," to boot from a device"),(0,i.kt)("li",{parentName:"ol"},"Select ",(0,i.kt)("strong",{parentName:"li"},"USB-device")," in order to boot from that")))),(0,i.kt)("li",{parentName:"ol"},"Wait until Ubuntu has booted from the USB-stick and you see the options to ",(0,i.kt)("inlineCode",{parentName:"li"},"Try Ubuntu")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"Install Ubuntu"),". "),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Click")," on ",(0,i.kt)("inlineCode",{parentName:"li"},"Try Ubuntu")," and wait until it has rebooted."),(0,i.kt)("li",{parentName:"ol"},"When Ubuntu has booted, connect to a network via Wi-Fi by clicking in the upper right corner of the OS and selecting to connect via Wi-Fi and enter the credentials. (Not needed if already connected via Ethernet cable)"),(0,i.kt)("li",{parentName:"ol"},"Now click on the same field again in the upper right corner and select ",(0,i.kt)("inlineCode",{parentName:"li"},"Settings")),(0,i.kt)("li",{parentName:"ol"},"In the left navigation list, select ",(0,i.kt)("inlineCode",{parentName:"li"},"Region & Language")),(0,i.kt)("li",{parentName:"ol"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"Input Sources")," section click on the ",(0,i.kt)("inlineCode",{parentName:"li"},"+")," button and choose your correct keyboard layout (e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"German (Germany)")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"German")," -> click on the ",(0,i.kt)("inlineCode",{parentName:"li"},"Add")," button)"),(0,i.kt)("li",{parentName:"ol"},"Now click on the language field in the upper right corner of the OS in order to change the keyboard Layout to your correct keyboard Layout (e.g. German)")),(0,i.kt)("h2",{id:"execution"},"Execution"),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"You are free to open this article in Firefox on Ubuntu which will enable you to copy and paste the commands into the Terminal.")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Now, open a Terminal (by pressing the ",(0,i.kt)("inlineCode",{parentName:"li"},"[Windows]")," key and type in Terminal) and open the search result"),(0,i.kt)("li",{parentName:"ol"},"In the terminal, type in and press ",(0,i.kt)("inlineCode",{parentName:"li"},"[ENTER]")," and wait until everything is installed:",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"sudo apt update \\\n&& sudo add-apt-repository universe \\\n&& sudo apt update \\\n&& sudo apt install borgbackup -y\n"))),(0,i.kt)("li",{parentName:"ol"},"Now connect your external Backup HDD to the Laptop/PC. It should show a notification and make a sound that the drive was connected"),(0,i.kt)("li",{parentName:"ol"},"Find out where excactly the drive was mounted (it should be somewhere in /media) by running:",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"sudo lsblk | grep /media\n"))),(0,i.kt)("li",{parentName:"ol"},"It should now display only the newly connected drive and on the right side you will see the excact mountpoint (like e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"/media/ubuntu/Daily Backup"),")"),(0,i.kt)("li",{parentName:"ol"},"Based on the example above and if you've chosen to use the recommended directory for the Backup (during the Backup wizard), you will be able to use the following command now to mount the backup on the system:",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'sudo mkdir -p /tmp/borg \\\n&& sudo borg mount "/media/ubuntu/Daily Backup/borgbackup/NcVM" /tmp/borg \n')),"(Of course if your path is different, you will need to modify the command. If that still doesn't work for you, you will need to find out and change the path to your Backup directory manually.)"),(0,i.kt)("li",{parentName:"ol"},"You will be asked by ",(0,i.kt)("inlineCode",{parentName:"li"},"Borg")," for the ",(0,i.kt)("inlineCode",{parentName:"li"},"Passphrase")," now that you've initially used to encrypt the backup and type it in. (Don't wonder: if you've entered it correctly, you will get no respoose by the terminal)"),(0,i.kt)("li",{parentName:"ol"},"When that worked, you will be able to access your files in the file manager by running:",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"xhost +si:localuser:root && sudo nautilus /tmp/borg\n"))),(0,i.kt)("li",{parentName:"ol"},"Now, you should see the backup archives in the file manager.",(0,i.kt)("admonition",{parentName:"li",title:"copy onto other drive",type:"tip"},(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},"Now, you are free to connect the second drive onto that you want to copy some files/folders."),(0,i.kt)("li",{parentName:"ol"},"It should show a notification and sound again that a new drive was connected and should also show up as additional drive in the left navigation list in the file manager "),(0,i.kt)("li",{parentName:"ol"},"It is recommended to open this location in a new window by pressing ",(0,i.kt)("inlineCode",{parentName:"li"},"[CTRL] + [N]")," or right-clicking on the entry and selecting ",(0,i.kt)("inlineCode",{parentName:"li"},"Open in new window")),(0,i.kt)("li",{parentName:"ol"},"Now, you are free to easily copy files between the backup archive and the drive.")))),(0,i.kt)("li",{parentName:"ol"},"After you are done, press ",(0,i.kt)("inlineCode",{parentName:"li"},"[CTRL] + [C]")," in the terminal to exit the file manger and unmount the borg archive with:",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"sudo umount /tmp/borg\n"))),(0,i.kt)("li",{parentName:"ol"},"Now, ",(0,i.kt)("strong",{parentName:"li"},"power off")," Ubuntu by selecting the field in the upper right corner again and select ",(0,i.kt)("inlineCode",{parentName:"li"},"Power Off")," to power off Ubuntu again.")))}m.isMDXComponent=!0}}]);